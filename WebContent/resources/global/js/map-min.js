(function(){if(window.google&&google.gears){return}var a=null;if(typeof GearsFactory!="undefined"){a=new GearsFactory()}else{try{a=new ActiveXObject("Gears.Factory");if(a.getBuildInfo().indexOf("ie_mobile")!=-1){a.privateSetGlobalObject(this)}}catch(b){if((typeof navigator.mimeTypes!="undefined")&&navigator.mimeTypes["application/x-googlegears"]){a=document.createElement("object");a.style.display="none";a.width=0;a.height=0;a.type="application/x-googlegears";document.documentElement.appendChild(a);if(a&&(typeof a.create=="undefined")){a=null}}}}if(!a){return}if(!window.google){google={}}if(!google.gears){google.gears={factory:a}}})();/*
 * geo-location-javascript v0.4.3
 * http://code.google.com/p/geo-location-javascript/
 *
 * Copyright (c) 2009 Stan Wiechers
 * Licensed under the MIT licenses.
 *
 * Revision: $Rev: 68 $: 
 * Author: $Author: whoisstan $:
 * Date: $Date: 2010-02-15 13:42:19 +0100 (Mon, 15 Feb 2010) $:    
 */
var bb_successCallback;var bb_errorCallback;var bb_blackberryTimeout_id=-1;function handleBlackBerryLocationTimeout(){if(bb_blackberryTimeout_id!=-1){bb_errorCallback({message:"Timeout error",code:3})}}function handleBlackBerryLocation(){clearTimeout(bb_blackberryTimeout_id);bb_blackberryTimeout_id=-1;if(bb_successCallback&&bb_errorCallback){if(blackberry.location.latitude==0&&blackberry.location.longitude==0){bb_errorCallback({message:"Position unavailable",code:2})}else{var a=null;if(blackberry.location.timestamp){a=new Date(blackberry.location.timestamp)}bb_successCallback({timestamp:a,coords:{latitude:blackberry.location.latitude,longitude:blackberry.location.longitude}})}bb_successCallback=null;bb_errorCallback=null}}var geo_position_js=function(){var a={};var b=null;a.getCurrentPosition=function(c,d,e){b.getCurrentPosition(c,d,e)};a.init=function(){try{if(typeof(geo_position_js_simulator)!="undefined"){b=geo_position_js_simulator}else{if(typeof(bondi)!="undefined"&&typeof(bondi.geolocation)!="undefined"){b=bondi.geolocation}else{if(typeof(navigator.geolocation)!="undefined"){b=navigator.geolocation;a.getCurrentPosition=function(d,e,f){function g(h){if(typeof(h.latitude)!="undefined"){d({timestamp:h.timestamp,coords:{latitude:h.latitude,longitude:h.longitude}})}else{d(h)}}b.getCurrentPosition(g,e,f)}}else{if(typeof(window.google)!="undefined"&&typeof(google.gears)!="undefined"){b=google.gears.factory.create("beta.geolocation")}else{if(typeof(Mojo)!="undefined"&&typeof(Mojo.Service.Request)!="Mojo.Service.Request"){b=true;a.getCurrentPosition=function(d,e,f){parameters={};if(f){if(f.enableHighAccuracy&&f.enableHighAccuracy==true){parameters.accuracy=1}if(f.maximumAge){parameters.maximumAge=f.maximumAge}if(f.responseTime){if(f.responseTime<5){parameters.responseTime=1}else{if(f.responseTime<20){parameters.responseTime=2}else{parameters.timeout=3}}}}r=new Mojo.Service.Request("palm://com.palm.location",{method:"getCurrentPosition",parameters:parameters,onSuccess:function(g){d({timestamp:g.timestamp,coords:{latitude:g.latitude,longitude:g.longitude,heading:g.heading}})},onFailure:function(g){if(g.errorCode==1){e({code:3,message:"Timeout"})}else{if(g.errorCode==2){e({code:2,message:"Position Unavailable"})}else{e({code:0,message:"Unknown Error: webOS-code"+errorCode})}}}})}}else{if(typeof(device)!="undefined"&&typeof(device.getServiceObject)!="undefined"){b=device.getServiceObject("Service.Location","ILocation");a.getCurrentPosition=function(d,e,f){function h(k,j,i){if(j==4){e({message:"Position unavailable",code:2})}else{d({timestamp:null,coords:{latitude:i.ReturnValue.Latitude,longitude:i.ReturnValue.Longitude,altitude:i.ReturnValue.Altitude,heading:i.ReturnValue.Heading}})}}var g=new Object();g.LocationInformationClass="BasicLocationInformation";b.ILocation.GetLocation(g,h)}}else{if(typeof(window.blackberry)!="undefined"&&blackberry.location.GPSSupported){if(typeof(blackberry.location.setAidMode)=="undefined"){return false}blackberry.location.setAidMode(2);a.getCurrentPosition=function(d,e,f){bb_successCallback=d;bb_errorCallback=e;if(f.timeout){bb_blackberryTimeout_id=setTimeout("handleBlackBerryLocationTimeout()",f.timeout)}else{bb_blackberryTimeout_id=setTimeout("handleBlackBerryLocationTimeout()",60000)}blackberry.location.onLocationUpdate("handleBlackBerryLocation()");blackberry.location.refreshLocation()};b=blackberry.location}}}}}}}}catch(c){alert("error="+c);if(typeof(console)!="undefined"){console.log(c)}return false}return b!=null};return a}();$(window).load($.mobile.silentScroll);$(document).ready(function(){$(window).bind("orientationchange resize pageshow",fixgeometry)});$("#plus").click(function(){map.zoomIn()});$("#minus").click(function(){map.zoomOut()});$("#north").click(function(){map.pan(0,-50)});$("#south").click(function(){map.pan(0,50)});$("#west").click(function(){map.pan(-50,0)});$("#east").click(function(){map.pan(50,0)});$("#location").click(function(){if(geo_position_js.init()){geo_position_js.getCurrentPosition(geo_success,geo_error)}});function guidGenerator(){var a=function(){return(((1+Math.random())*65536)|0).toString(16).substring(1)};return(a()+a()+"-"+a()+"-"+a()+"-"+a()+"-"+a()+a()+a())}function filterData(a){a=a.replace(/<?\/body[^>]*>/g,"");a=a.replace(/<--[Ss]*?-->/g,"");a=a.replace(/<noscript[^>]*>[Ss]*?<\/noscript>/g,"");a=a.replace(/<script[^>]*>[Ss]*?<\/script>/g,"");a=a.replace(/<script.*\/>/,"");return a}function makePhoneCall(a){alert(a);window.localtion=a}var fixgeometry=function(){$("#north").css("top")=10;$("#north").css("left")=$(window).width()*0.5;$("#south").css("bottom")=10;$("#south").css("left")=$(window).width()*0.5;$("#east").css("top")=$(window).height()*0.5;$("#east").css("right")=10;$("#west").css("top")=$(window).height()*0.5;$("#west").css("left")=10;$("#location").css("bottom")=10;$("#location").css("right")=10;$("#navigation").css("bottom")=0;$("#navigation").css("left")=10;$("#mappage-content").height($(window).height()*0.9)};function openPopup(a){var b=a.feature;if(currentPopupGuid){$("#"+currentPopupGuid).remove()}currentPopupGuid=guidGenerator();$("#"+currentPopupGuid).live("pagecreate",function(){$("div.ui-corner-top.ui-overlay-shadow.ui-bar-a.ui-header > a").remove()});var c="<div id='"+currentPopupGuid+"' data-role='dialog'><div data-role='header'>";c+="<h1>"+b.attributes.header+"</h1>";c+="</div><div data-role='content'>";c+=b.attributes.content;c+="</div></div>";$.mobile.pageContainer.append(c);$("#"+currentPopupGuid).page();$("#"+currentPopupGuid).attr("data-url",currentPopupGuid);selectControl.unselect(b);$.mobile.changePage("#"+currentPopupGuid,"pop");return false}function openIvrPopup(b,c,a){if(currentIvrGuid){$("#"+currentIvrGuid).remove()}currentIvrGuid=guidGenerator();$("#"+currentIvrGuid).live("pagecreate",function(){$("div.ui-corner-top.ui-overlay-shadow.ui-bar-a.ui-header > a").remove()});$("#"+currentIvrGuid).live("pagehide",function(){$("#"+currentPopupGuid).dialog("close")});$.get(b,function(e){var d="<div id='"+currentIvrGuid+"' data-role='dialog'><div data-role='header'><h1>"+c+"</h1></div><div data-role='content'>";d+=filterData(e);d+="<a href='#' onClick='closedDialog = true;' data-role='button' data-rel='back' data-transition='pop'>"+a+"</a>";d+="</div></div>";$.mobile.pageContainer.append(d);$("#"+currentIvrGuid).page();$("#"+currentIvrGuid).attr("data-url",currentIvrGuid);$.mobile.changePage("#"+currentIvrGuid,"pop")});return false};